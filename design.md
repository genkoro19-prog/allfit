# OmniTrack Fitness - モバイルアプリインターフェース設計書

## 設計原則

- **モバイルポートレート方向(9:16)**を前提とした設計
- **片手操作**を最優先
- **Apple Human Interface Guidelines (HIG)**に準拠
- **入力ストレスゼロ**を実現するタップ中心のUI
- iOS標準アプリのようなネイティブな操作感

## カラーパレット

### ブランドカラー
- **プライマリー**: `#FF6B35` (エネルギッシュなオレンジ - モチベーションを高める)
- **セカンダリー**: `#004E89` (信頼感のある深いブルー - データの正確性を表現)
- **アクセント**: `#F7B801` (達成感を表すゴールド - 自己ベスト更新時に使用)

### システムカラー
- **成功**: `#22C55E` (緑 - セット完了、目標達成)
- **警告**: `#F59E0B` (黄 - 疲労度高)
- **エラー**: `#EF4444` (赤 - 入力エラー)
- **背景(Light)**: `#FFFFFF`
- **背景(Dark)**: `#151718`
- **サーフェス(Light)**: `#F5F5F5`
- **サーフェス(Dark)**: `#1E2022`

## 画面一覧と機能

### 1. ホーム画面 (Home Screen)
**主要コンテンツ**:
- 週間カレンダー(横スクロール、今日を中央に表示)
- 今日の栄養サマリー(PFCの円グラフ + プログレスバー)
- 今日の筋トレリスト(種目ごとにカード表示)
- 右下にFloating Action Button(筋トレ追加/食事追加)

**機能**:
- 日付タップで過去/未来の記録を表示
- 筋トレカードタップで詳細表示・編集
- FABタップで追加メニュー表示(筋トレ/食事/有酸素)

### 2. 筋トレ記録画面 (Workout Log Screen)
**主要コンテンツ**:
- 種目選択エリア(プリセット + カスタム種目)
- セット一覧(重量・回数・完了フラグ)
- セット追加ボタン(各セット直下に配置)
- インターバルタイマー(記録時に自動起動)

**機能**:
- 種目タップで器具タイプ(バーベル/ダンベル/マシン/自重)を含む種目詳細を表示
- 重量/回数タップでボトムシート入力UI表示
- セット完了タップでインターバルタイマー自動起動
- 1RM自動計算、自己ベスト更新時に紙吹雪エフェクト

### 3. 重量入力ボトムシート (Weight Input Bottom Sheet)
**主要コンテンツ**:
- 現在の重量表示(大きなフォント)
- プレート加算・減算ボタン群(器具タイプに応じて変化)
  - **バーベル**: +20kg(実際は+40kg), +10kg(+20kg), +5kg(+10kg), +2.5kg(+5kg), +1.25kg(+2.5kg)
  - **ダンベル**: +10kg, +5kg, +2kg, +1kg
  - **マシン/自重**: +10kg, +5kg, +2.5kg, +1kg
- クリアボタン、決定ボタン

**機能**:
- ボタンタップで即座に重量が増減
- バーベルの場合、シャフト重量(20kg)を自動加算
- 決定ボタンで入力確定、ボトムシートを閉じる

### 4. 回数入力ボトムシート (Reps Input Bottom Sheet)
**主要コンテンツ**:
- 現在の回数表示
- 数字ボタン(1-20の範囲)
- クリアボタン、決定ボタン

**機能**:
- 数字ボタンタップで回数設定
- 決定ボタンで入力確定

### 5. 食事記録画面 (Diet Log Screen)
**主要コンテンツ**:
- 今日の摂取PFCサマリー(円グラフ + 数値)
- 食事リスト(朝食/昼食/夕食/間食)
- 食事追加ボタン

**機能**:
- 自然言語入力(LLM連携)
- プリセット食事ボタン(「特」「べーす」「べべき」「さわおに」)
- 食事項目タップで編集・削除

### 6. 種目マスタ画面 (Exercise Master Screen)
**主要コンテンツ**:
- プリセット種目リスト(部位別にグループ化)
- カスタム種目リスト
- 種目追加ボタン

**機能**:
- 種目タップで詳細表示・編集
- 種目追加時に器具タイプを選択(バーベル/ダンベル/マシン/自重)
- 部位選択(胸/背中/脚/肩/腕/腹)

### 7. プロフィール画面 (Profile Screen)
**主要コンテンツ**:
- 基本情報(身長/体重/年齢/性別)
- 目標設定(目標体重/目標ベンチプレス/目標PFC)
- 設定(インターバルタイマーのデフォルト秒数)

**機能**:
- 各項目タップで編集
- 基礎代謝・目標PFCの自動算出

### 8. 統計画面 (Statistics Screen) - フェーズ3
**主要コンテンツ**:
- 部位別疲労度ヒートマップ(人体モデル表示)
- 週間/月間のトレーニング時間グラフ
- 1RMの推移グラフ(種目別)
- ジム滞在時間の記録

**機能**:
- ジオフェンスによる自動チェックイン/アウト
- 疲労度に応じた色分け表示(緑→黄→赤)

## 主要ユーザーフロー

### フロー1: 筋トレ記録
1. ホーム画面でFABタップ → 「筋トレ追加」選択
2. 種目選択(例: ベンチプレス)
3. 重量入力ボトムシート表示 → プレートボタンで重量設定 → 決定
4. 回数入力ボトムシート表示 → 数字ボタンで回数設定 → 決定
5. セット完了ボタンタップ → インターバルタイマー自動起動
6. タイマー終了後、次のセットを追加(ステップ3に戻る)
7. トレーニング終了 → ホーム画面に戻る

### フロー2: 食事記録(自然言語入力)
1. ホーム画面でFABタップ → 「食事追加」選択
2. 自然言語入力フィールドに「鶏胸肉200gと白米150g」と入力
3. LLMが解析 → PFCとカロリーを自動計算
4. 確認画面で内容を確認 → 保存
5. ホーム画面の栄養サマリーが更新

### フロー3: 食事記録(プリセット)
1. ホーム画面でFABタップ → 「食事追加」選択
2. プリセットボタン「特」をタップ
3. 自動的に337kcal / P44.7g / F11.1g / C25.6gが記録
4. ホーム画面の栄養サマリーが更新

### フロー4: 1RM自己ベスト更新
1. 筋トレ記録中、新しい重量・回数を入力
2. アプリが1RMを自動計算
3. 過去の自己ベストを超えた場合、紙吹雪エフェクトが発生
4. 「新記録達成!」のメッセージ表示

## 広告配置

- **ホーム画面最下部**: 固定バナー広告(320x50)
- **統計画面最下部**: 固定バナー広告(320x50)
- 広告は画面の主要コンテンツを妨げない位置に配置
- ユーザビリティを損なわないよう、誤タップを防ぐマージンを確保

## 技術的考慮事項

### データ永続化
- **ローカル優先**: AsyncStorageを使用してオフラインでも動作
- **クラウド同期(オプション)**: ユーザーが明示的に要求した場合のみバックエンドDBと同期

### パフォーマンス
- FlatListを使用してリストの高速スクロールを実現
- 画像の遅延読み込みとキャッシュ
- 重い計算(1RM算出など)はメモ化

### アクセシビリティ
- 十分なタップ領域(最小44x44pt)
- 高コントラスト比(WCAG AA準拠)
- ダークモード対応
